import{_ as h,c as t,a as r,w as u,b as d,d as c,v as f,n as g,t as a,e as m,A as p,o as l}from"./index-xP5tA43O.js";const w={name:"AuthLogin",data(){return{form:{email:"",password:""},errors:{},generalError:"",successMessage:"",needsVerification:!1,loading:!1,resendLoading:!1}},methods:{async handleLogin(){this.loading=!0,this.errors={},this.generalError="",this.needsVerification=!1;try{const i=await p.login(this.form.email,this.form.password);i.success&&window.opener.postMessage({type:"AUTH_SUCCESS",user:i.user},window.location.origin)}catch(i){i.errors?this.errors=i.errors:(this.generalError=i.error||"Login failed",this.needsVerification=i.needs_verification||!1)}finally{this.loading=!1}},async resendVerification(){if(!this.form.email){this.generalError="Please enter your email address first";return}this.resendLoading=!0;try{const i=await p.resendVerification(this.form.email);this.successMessage=i.message,this.generalError=""}catch(i){this.generalError=i.error||"Failed to send verification email"}finally{this.resendLoading=!1}},switchToSignup(){this.$router.push("/auth/signup")}}},y={class:"auth-popup"},v={class:"auth-container"},_={class:"form-group"},b={key:0,class:"error-message"},S={class:"form-group"},E={key:0,class:"error-message"},V={key:0,class:"alert alert-error"},k=["disabled"],L={key:1,class:"alert alert-success"},M=["disabled"],A={class:"auth-footer"};function C(i,s,T,x,e,n){return l(),t("div",y,[r("div",v,[s[8]||(s[8]=r("div",{class:"auth-header"},[r("h2",null,"Sign In to SkyNova"),r("p",null,"Welcome back! Please sign in to your account.")],-1)),r("form",{onSubmit:s[3]||(s[3]=u((...o)=>n.handleLogin&&n.handleLogin(...o),["prevent"])),class:"auth-form"},[r("div",_,[s[5]||(s[5]=r("label",{for:"email"},"Email Address",-1)),c(r("input",{type:"email",id:"email","onUpdate:modelValue":s[0]||(s[0]=o=>e.form.email=o),class:g({error:e.errors.email}),placeholder:"Enter your email",required:""},null,2),[[f,e.form.email]]),e.errors.email?(l(),t("span",b,a(e.errors.email),1)):d("",!0)]),r("div",S,[s[6]||(s[6]=r("label",{for:"password"},"Password",-1)),c(r("input",{type:"password",id:"password","onUpdate:modelValue":s[1]||(s[1]=o=>e.form.password=o),class:g({error:e.errors.password}),placeholder:"Enter your password",required:""},null,2),[[f,e.form.password]]),e.errors.password?(l(),t("span",E,a(e.errors.password),1)):d("",!0)]),e.generalError?(l(),t("div",V,[m(a(e.generalError)+" ",1),e.needsVerification?(l(),t("button",{key:0,onClick:s[2]||(s[2]=(...o)=>n.resendVerification&&n.resendVerification(...o)),type:"button",class:"btn-link",disabled:e.resendLoading},a(e.resendLoading?"Sending...":"Resend verification email"),9,k)):d("",!0)])):d("",!0),e.successMessage?(l(),t("div",L,a(e.successMessage),1)):d("",!0),r("button",{type:"submit",class:"btn-primary",disabled:e.loading},a(e.loading?"Signing In...":"Sign In"),9,M)],32),r("div",A,[r("p",null,[s[7]||(s[7]=m("Don't have an account? ")),r("a",{href:"#",onClick:s[4]||(s[4]=u((...o)=>n.switchToSignup&&n.switchToSignup(...o),["prevent"]))},"Sign up here")])])])])}const N=h(w,[["render",C],["__scopeId","data-v-b48a623c"]]);export{N as default};
